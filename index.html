<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Valentine</title>
<style>
/* Dein bestehendes CSS */
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(180deg,#ffd6e6,#ffeef5);
  font-family:-apple-system, BlinkMacSystemFont, Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
}
.card{
  background:white;
  width:90%;
  max-width:380px;
  padding:30px 22px 40px;
  border-radius:24px;
  box-shadow:0 20px 40px rgba(0,0,0,0.1);
  text-align:center;
}
.hero{
  width:100%;
  max-height:220px;
  object-fit:cover;
  border-radius:14px;
  margin-bottom:22px;
}
h1{
  font-size:30px;
  margin-bottom:30px;
  color:#ff3b7d;
}
.buttons{
  display:flex;
  justify-content:center;
  gap:20px;
}
button{
  font-size:20px;
  padding:14px 26px;
  border:none;
  border-radius:14px;
  cursor:pointer;
  transition:0.25s ease;
}
#yes{
  background:#ff3b7d;
  color:white;
  box-shadow:0 10px 20px rgba(255,59,125,0.4);
}
#no{
  background:#f1f1f1;
  color:#444;
}
#comments{
  margin-top:25px;
  min-height:28px;
  font-size:16px;
  color:#777;
}
.option{
  background:#f8f8f8;
  border-radius:14px;
  padding:15px;
  margin:12px 0;
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-size:18px;
}
.option input{
  transform:scale(1.4);
}
.send{
  margin-top:25px;
  width:100%;
  background:#ff3b7d;
  color:white;
  padding:16px;
  font-size:18px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(255,59,125,0.4);
  margin-bottom: 15px; /* Zus√§tzlicher Abstand zum unteren Button */
}
/* Zus√§tzliches Styling f√ºr die √úberraschungsnachricht */
.surprise-message {
    margin-top: 25px;
    margin-bottom: 30px;
    padding: 20px;
    background: #fff0f5; /* Ein helleres Rosa */
    border-radius: 18px;
    border: 1px dashed #ff3b7d; /* Ein kleiner Rahmen f√ºr den √úberraschungseffekt */
    color: #444;
    font-size: 17px;
    line-height: 1.5;
    text-align: left; /* Text etwas linksb√ºndiger, damit es nat√ºrlicher wirkt */
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
}
.surprise-message strong {
    color: #ff3b7d;
}
/* Neues Styling f√ºr den "by Paul"-Hinweis */
.by-paul {
    position: fixed; /* Fixiert am Viewport */
    bottom: 10px;    /* 10px vom unteren Rand */
    left: 10px;      /* 10px vom linken Rand */
    font-size: 14px; /* Etwas gr√∂√üere Schriftgr√∂√üe */
    color: #888;     /* Etwas dunklerer Grauton */
    opacity: 0.9;    /* Fast vollst√§ndig deckend */
    z-index: 1000;   /* Stellt sicher, dass es √ºber anderen Elementen liegt */
    font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif; /* Gleiche Schriftart */
    text-shadow: 0 0 2px rgba(255,255,255,0.5); /* Leichter Schatten f√ºr bessere Lesbarkeit auf hellem Hintergrund */
}
/* Neuer Stil f√ºr den "Ich kann nicht"-Button */
.cant-send-button {
    width: 100%;
    background: #e0e0e0; /* Ein sanftes Grau */
    color: #666;
    padding: 16px;
    font-size: 18px;
    border-radius: 16px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
    margin-top: 5px; /* Kleiner Abstand zum oberen Button */
}
/* Custom Confirm Dialog Styles */
#customConfirmOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black backdrop */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1001; /* Above everything else */
  /* Animation f√ºr sanftes Ein-/Ausblenden */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}
#customConfirmOverlay.active {
    opacity: 1;
    visibility: visible;
}
#customConfirmDialog {
  background: white;
  padding: 30px;
  border-radius: 24px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  text-align: center;
  width: 90%;
  max-width: 320px; /* Slightly smaller than the main card */
  color: #444;
  /* Animation f√ºr sanftes Erscheinen */
  transform: translateY(-20px);
  transition: transform 0.3s ease;
}
#customConfirmOverlay.active #customConfirmDialog {
    transform: translateY(0);
}
.dialog-message {
  font-size: 18px;
  margin-bottom: 25px;
  line-height: 1.4;
  color: #ff3b7d; /* Make the message stand out a bit */
  font-weight: bold;
}
.dialog-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}
.dialog-button {
  font-size: 16px;
  padding: 10px 20px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: 0.25s ease;
  flex: 1; /* Buttons f√ºllen den verf√ºgbaren Platz aus */
}
.dialog-button-yes {
  background: #ff3b7d;
  color: white;
  box-shadow: 0 5px 10px rgba(255,59,125,0.3);
}
.dialog-button-no {
  background: #f1f1f1;
  color: #444;
  box-shadow: 0 5px 10px rgba(0,0,0,0.1);
}
/* Neuer Stil f√ºr das Textarea-Feld */
textarea#reasonInput {
    width: calc(100% - 20px); /* 100% Breite minus Padding */
    padding: 10px;
    margin-top: 15px;
    border: 1px solid #ddd;
    border-radius: 10px;
    font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
    font-size: 16px;
    resize: vertical; /* Nur vertikal skalierbar */
    min-height: 80px; /* Mindesth√∂he */
}
/* Custom Alert Dialog Styles - NEU */
#customAlertDialogOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1002; /* H√∂her als Confirm, damit es dar√ºber liegt */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}
#customAlertDialogOverlay.active {
    opacity: 1;
    visibility: visible;
}
#customAlertDialog {
  background: white;
  padding: 30px;
  border-radius: 24px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  text-align: center;
  width: 90%;
  max-width: 320px;
  color: #444;
  transform: translateY(-20px);
  transition: transform 0.3s ease;
}
#customAlertDialogOverlay.active #customAlertDialog {
    transform: translateY(0);
}
/* Die Klassen .dialog-message, .dialog-buttons und .dialog-button-yes k√∂nnen wiederverwendet werden */
</style>
</head>
<body>
<div class="card" id="app">
<img src="https://tse2.mm.bing.net/th/id/OIP.n6Hly5jUJlWO_IQn0NN1SQHaHM?rs=1&pid=ImgDetMain&o=7&rm=3" class="hero">
<h1>Will you be my Valentine?</h1>
<div class="buttons">
  <button id="yes">Yes</button>
  <button id="no">No</button>
</div>
<div id="comments"></div>
</div>
<div class="by-paul">by Paul</div>
<!-- Eigene HTML-Struktur f√ºr das Best√§tigungsfenster (Confirm) -->
<div id="customConfirmOverlay">
  <div id="customConfirmDialog">
    <p class="dialog-message">M√∂chtest du diese (noch nicht getroffene) Antwort wirklich abschicken? üò•</p>
    <div class="dialog-buttons">
      <button id="customConfirmYes" class="dialog-button dialog-button-yes">Ja, leider</button>
      <button id="customConfirmNo" class="dialog-button dialog-button-no">Nein, doch nicht!</button>
    </div>
  </div>
</div>
<!-- Ende der eigenen HTML-Struktur f√ºr Confirm -->
<!-- Eigene HTML-Struktur f√ºr das Hinweisfenster (Alert) - NEU -->
<div id="customAlertDialogOverlay">
  <div id="customAlertDialog">
    <p class="dialog-message" id="customAlertDialogMessage"></p>
    <div class="dialog-buttons">
      <button id="customAlertDialogOk" class="dialog-button dialog-button-yes">OK</button>
    </div>
  </div>
</div>
<!-- Ende der eigenen HTML-Struktur f√ºr Alert -->
<script>
let yes = document.getElementById("yes");
let no = document.getElementById("no");
let comments = document.getElementById("comments");
let app = document.getElementById("app");
let scale = 1;
let lines = [
  "junge",
  "h√∂r auf damit",
  "mach jetzt nicht so",
  "reicht jetzt ernst",
  "langsam wirds unangenehm",
  "REICHT",
  "H√ñR AUF",
  "bidde komm",
  "du hast keine wahl.",
  "du kannst nicht nein sagen"
];
let index = 0;

// NEU: Globale Variable zum Speichern der ausgew√§hlten Essensoption
let selectedFoodChoice = "Keine Angabe"; // Standardwert, falls nichts ausgew√§hlt wird

// Referenzen f√ºr das eigene Best√§tigungsfenster (Confirm)
const customConfirmOverlay = document.getElementById('customConfirmOverlay');
const customConfirmYes = document.getElementById('customConfirmYes');
const customConfirmNo = document.getElementById('customConfirmNo');
// Funktion zum Anzeigen des Custom Confirm Dialogs
function showCustomConfirm() {
    return new Promise((resolve) => {
        customConfirmOverlay.classList.add('active'); // Dialog anzeigen
        const handleYes = () => {
            customConfirmOverlay.classList.remove('active'); // Dialog ausblenden
            customConfirmYes.removeEventListener('click', handleYes);
            customConfirmNo.removeEventListener('click', handleNo);
            resolve(true); // Ja-Antwort zur√ºckgeben
        };
        const handleNo = () => {
            customConfirmOverlay.classList.remove('active'); // Dialog ausblenden
            customConfirmYes.removeEventListener('click', handleYes);
            customConfirmNo.removeEventListener('click', handleNo);
            resolve(false); // Nein-Antwort zur√ºckgeben
        };
        customConfirmYes.addEventListener('click', handleYes);
        customConfirmNo.addEventListener('click', handleNo);
    });
}
// Referenzen f√ºr das eigene Hinweisfenster (Alert) - NEU
const customAlertDialogOverlay = document.getElementById('customAlertDialogOverlay');
const customAlertDialogMessage = document.getElementById('customAlertDialogMessage');
const customAlertDialogOk = document.getElementById('customAlertDialogOk');
// Funktion zum Anzeigen des Custom Alert Dialogs - NEU
function showCustomAlert(message) {
    return new Promise((resolve) => {
        customAlertDialogMessage.innerText = message; // Nachricht setzen
        customAlertDialogOverlay.classList.add('active'); // Dialog anzeigen
        const handleClick = () => {
            customAlertDialogOverlay.classList.remove('active'); // Dialog ausblenden
            customAlertDialogOk.removeEventListener('click', handleClick); // Event Listener entfernen
            resolve(); // Promise aufl√∂sen, da es nur einen OK-Button gibt
        };
        customAlertDialogOk.addEventListener('click', handleClick);
    });
}
no.onclick = () => {
  scale += 0.15;
  yes.style.transform = `scale(${scale})`;
  comments.innerText = lines[index];
  if(index < lines.length - 1){
    index++;
  } else {
    yes.style.transform = `scale(${scale * 1.2})`;
    comments.innerText = "Das wird nichts bringen! üòâ";
  }
};
yes.onclick = () => {
  app.innerHTML = `
    <h1>‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</h1>
    <div class="surprise-message">
        Ich wei√ü, bin sp√§t dran, aber jetzt hab ich was geplant üòâ
        Wir fahren am Valentinstag nach <strong>Frankfurt</strong>!
        <br><br>
        Am besten wir sind gegen 15 Uhr da. Was wir dann machen bleibt eine
        √úberraschung, und dannach gehen wir essen.
        Auf was hast du am meisten Lust? Hilf mir bei
        der Restaurantwahl. Das genaue Restaurant suchen wir dann <strong>zusammen</strong> aus:
    </div>
    <h2>Pick our date food</h2>
    <div class="option">
      Italiener
      <input type="radio" name="r" value="Italian">
    </div>
    <div class="option">
      Sushi
      <input type="radio" name="r" value="Sushi">
    </div>
    <div class="option">
      Burger
      <input type="radio" name="r" value="Burgers">
    </div>
    <div class="option">
      Steakhouse
      <input type="radio" name="r" value="Steakhouse">
    </div>
    <button class="send" onclick="send()">Send answer</button>
    <button class="cant-send-button" onclick="cantSendChoice()">Der Plan geht nicht</button>
    <p id="done" style="margin-top:20px;color:#777;"></p>
  `;

  // NEU: Event Listener f√ºr die neu erstellten Radio-Buttons hinzuf√ºgen
  const radioButtons = document.querySelectorAll('input[name="r"]');
  radioButtons.forEach(radio => {
    radio.addEventListener('change', (event) => {
      selectedFoodChoice = event.target.value; // Speichert die Auswahl
      console.log('Ausgew√§hltes Essen gespeichert:', selectedFoodChoice); // Nur zum Debuggen
    });
  });
};

async function send(){
  let choice = document.querySelector('input[name="r"]:checked');
  if(!choice){
    await showCustomAlert("Bitte w√§hle eine Option aus!");
    return;
  }
  // Optional: selectedFoodChoice hier nochmal aktualisieren, falls der User direkt sendet
  selectedFoodChoice = choice.value;

  fetch("https://formspree.io/f/xnjbjbzw",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({date_choice: choice.value})
  });
  document.getElementById("done").innerText = "Deine Antwort wurde gesendet! Ich Liebe Dich ‚ù§Ô∏è";
}
// Angepasste Funktion f√ºr den "Ich kann nicht"-Button mit eigenem Best√§tigungsfenster
async function cantSendChoice(){
    let doneParagraph = document.getElementById("done");
    doneParagraph.innerText = "üò•..."; // Trauriger Emoji erscheint
    const confirmed = await showCustomConfirm(); // Ruft unser eigenes Best√§tigungsfenster auf
    if (confirmed) {
        // Hier wird nun das Eingabefeld angezeigt
        app.innerHTML = `
            <h1>Warum?</h1>
            <div class="surprise-message">
                Was ist das Problem?
                <br><br>
                <textarea id="reasonInput" rows="5" placeholder="Hier kannst du mir deine Gedanken mitteilen..."></textarea>
            </div>
            <button class="send" onclick="sendReason()">Grund abschicken</button>
            <p id="done" style="margin-top:20px;color:#777;"></p>
        `;
    } else {
        doneParagraph.innerText = "Mach mir doch keine Angst man!!!";
    }
}
// Neue Funktion zum Abschicken des Grundes
async function sendReason(){
    let reasonInput = document.getElementById("reasonInput");
    let reason = reasonInput.value.trim();
    let doneParagraph = document.getElementById("done");
    if (!reason) {
        await showCustomAlert("Bitte gib einen Grund ein, bevor du abschickst!");
        return;
    }
    fetch("https://formspree.io/f/xnjbjbzw",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({
            // NEU: Sende die zuvor gespeicherte Essensauswahl mit
            pre_selected_food_choice: selectedFoodChoice,
            reason: reason
        })
    });
    doneParagraph.innerText = "Danki. Dann eben Plan√§nderung! ‚ù§Ô∏è";
    // Optional: Eingabefeld und Button deaktivieren oder ausblenden
    // document.querySelector('.send').disabled = true;
    // reasonInput.disabled = true;
}
</script>
</body>
</html>
